function LRU(a){this.size=0,"number"==typeof a?this.limit=a:this.limit=10,this.map={},this.head=null,this.tail=null}LRU.prototype.lrunode=function(a,b){null!=a&&(this.key=a),null!=b&&(this.value=b),this.prev=null,this.next=null},LRU.prototype.setHead=function(a){a.next=this.head,a.prev=null,null!==this.head&&(this.head.prev=a),this.head=a,null===this.tail&&(this.tail=a),this.size++,this.map[a.key]=a},LRU.prototype.set=function(a,c){let b=new LRU.prototype.lrunode(a,c);this.map[a]?(this.map[a].value=b.value,this.remove(b.key)):this.size>=this.limit&&(delete this.map[this.tail.key],this.size--,this.tail=this.tail.prev,this.tail.next=null),this.setHead(b)},LRU.prototype.get=function(a){if(this.map[a]){let b=this.map[a].value,c=new LRU.prototype.lrunode(a,b);return this.remove(a),this.setHead(c),b}},LRU.prototype.remove=function(b){let a=this.map[b];null!==a.prev?a.prev.next=a.next:this.head=a.next,null!==a.next?a.next.prev=a.prev:this.tail=a.prev,delete this.map[b],this.size--},LRU.prototype.removeAll=function(a){this.size=0,this.map={},this.head=null,this.tail=null,"number"==typeof a&&(this.limit=a)},LRU.prototype.forEach=function(c){let a=this.head,b=0;for(;a;)c.apply(this,[a,b,this]),b++,a=a.next},LRU.prototype.toJSON=function(){let b=[],a=this.head;for(;a;)b.push({key:a.key,value:a.value}),a=a.next;return b},LRU.prototype.toString=function(){let b="",a=this.head;for(;a;)b+=String(a.key)+":"+a.value,a=a.next,a&&(b+="\n");return b}